    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation and Heat Map</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.js"></script>
    <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }

        #map {
            position: fixed;
            width: 100%;
        }

        #nav-menu {
            position: fixed;
            top: 0px;
            left: 0px;
            right: 0px;
            height: 20px;
            background-color: rgba(190, 37, 37, 0.5);
            padding: 10px;
            border-radius: 0px;
            box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.1);
            display: flex-start;
            flex-direction: row;
            align-items: center;
            justify-content: space-around;
            gap: 10px;
            color: rgb(49, 9, 124);
            max-width: calc(100% - 20px);
            overflow: hidden;  
        }
        .header h1 {
            margin: 0;
            font-size: 1em;
        }
        .header .controls {
            display: flex;
            gap: 5px;
        }
        .header .controls button {
            padding: 5px 5px;
            border: none;
            background-color: #e0aaff;
            color: #000;
            cursor: pointer;
            border-radius: 5px;
        }
        .header .controls button:hover {
            background-color: #c77dff;
        }
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
    
        }
        .header_section {
            background-color: #f8f9fa;
            padding: 10px 0;
        }

        .nav-item {
            padding: 5px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color:yellow;
            cursor: pointer;
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            font-size: 14px;
            text-align: top;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        .nav-item:active {
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
        }

        #filters {
            position: fixed;
            bottom: 0px;
            left: 0px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 0px;
            box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: row;
            align-items: flex-end;
            justify-content: flex-start;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            color: white;
            max-width: 100%;
            overflow: hidden;
            color: white;
        }

        .filter-group {
            display: flex-start;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .filter-group h4 {
            margin: 0;
            padding: 0;
            font-size: 12px;
            color: white;
            grid-column: span 2;
            text-align: center;
        }

        button {
            padding: 10px 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: black;
            cursor: pointer;
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            font-size: 11px;
            white-space: nowrap;
            backdrop-filter: blur(10px);
        }

        button:hover {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        button:active {
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
        }

        .private {
            background: linear-gradient(145deg, #b8d417, #d0d1d8);
        }

        .public {
            background: linear-gradient(145deg, #143041, #27475D);
        }

        .primary {
            background: linear-gradient(145deg, #214F5F, #335C6E);
        }

        .secondary {
            background: linear-gradient(145deg, #6B504C, #7D615D);
        }

        .advanced {
            background: linear-gradient(145deg, #06a12d, #03c51d);
        }

        .intermediate {
            background: linear-gradient(145deg, #FFCB68, #FFD98A);
        }

        .basic {
            background: linear-gradient(145deg, #FFEB3B, #FFEF61);
        }

        .inadequate {
            background: linear-gradient(145deg, #F44336, #F55A49);
        }
        h2,h3 {
        margin: 10px;
        font-size: 18px;
      }

      h3 {
        font-size: 16px;
      }

      p {
        margin: 10px;
      }

      .map-overlay {
        position: absolute;
        bottom: 0;
        right: 0;
        background: #fff;
        margin-right: 20px;
        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }
      #features {
        top: 0;
        height: 100px;
        margin-top: 20px;
        width: 250px;
      }

      #legend {
        padding: 10px;
        box-shadow: 0 1px 2px rgb(0 0 0 / 10%);
        line-height: 18px;
        height: auto;
        margin-bottom: 40px;
        width: 150px;
      }

      .legend-key {
        display: inline-block;
        border-radius: 20%;
        width: 10px;
        height: 10px;
        margin-right: 5px;
      }

    </style>
</head>

    <body>
        <div id="map"></div>
            <div id="features"></div>

            <div id="filters">
        <div id="filters">
            <div class="filter-group">
                <h4>Type</h4>
                <button class="private" onclick="toggleFilter(this, 'type_of_facility', 'Private')">Private</button>
                <button class="public" onclick="toggleFilter(this, 'type_of_facility', 'Public')">Public</button>
            </div>
            <div class="filter-group">
                <h4>Category of Facility</h4>
                <button class="primary" onclick="toggleFilter(this, 'category_of_facility', 'Primary')">Primary</button>
                <button class="secondary" onclick="toggleFilter(this, 'category_of_facility', 'Secondary')">Secondary</button>
            </div>
            <div class="filter-group">
                <h4>Level of IPC Preparedness</h4>
                <button class="advanced" onclick="toggleFilter(this, 'level_of_ipc_preparedness', 'Advanced')">Advanced</button>
                <button class="intermediate" onclick="toggleFilter(this, 'level_of_ipc_preparedness', 'Intermediate')">Intermediate</button>
                <button class="basic" onclick="toggleFilter(this, 'level_of_ipc_preparedness', 'Basic')">Basic</button>
                <button class="inadequate" onclick="toggleFilter(this, 'level_of_ipc_preparedness', 'Inadequate')">Inadequate</button>
            </div> 
        </div>
            <div id="nav-menu">
                <a href="Home.html" class="nav-item">Home</a>
                <a href="HeatMap.html" class="nav-item">Heat Map</a>
                <a href="DataSymbols.html" class="nav-item">Data Symbols</a>
                <a href="PredictiveAnalysis.html" class="nav-item">Analytics Page</a>
            </div>
        </div>
            <div class="map-overlay" id="features">
            <h2>IPC Level Readiness</h2>
            <div id="pd"><p>Hover over an area!</p></div>
        </div>
            <div class="map-overlay" id="legend"></div>
        </body>

    <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYWthbmltbzEiLCJhIjoiY2x4czNxbjU2MWM2eTJqc2gwNGIwaWhkMSJ9.jSwZdyaPa1dOHepNU5P71g';
    var allFacilities = [
        { lga: "Ibadan North", name_of_facility: "Mercy Land Clinic and Maternity", latitude: 7.42502, longitude: 3.87831, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Hosanna Specialist Hospital", latitude: 7.40707, longitude: 3.88725, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Doctor's Polyclinic Maternity home", latitude: 7.44091, longitude: 3.90813, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North West", name_of_facility: "Ogunpa Primary Healthcare Center", latitude: 7.38779, longitude: 3.8842, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan North West", name_of_facility: "Queens Hospital", latitude: 7.39207, longitude: 3.88303, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan North West", name_of_facility: "Alafia Hospital", latitude: 7.39886, longitude: 3.88817, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North West", name_of_facility: "Oyo state College of Nursing Clinic", latitude: 7.40985, longitude: 3.87514, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North East", name_of_facility: "Iwo road Tuberculosis and Leprosy Clinic", latitude: 7.404238, longitude: 3.939794, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North East", name_of_facility: "TZ Hospital", latitude: 7.38722, longitude: 3.94194, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Adeoye Memorial Specialist Hospital", latitude: 7.39402, longitude: 3.88687, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Gentle Hearts Global Harvest Medical Center", latitude: 7.39663, longitude: 3.8838, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North East", name_of_facility: "Irefin Primary Healthcare Center", latitude: 7.37361, longitude: 3.90972, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Oje Primary Healthcare Center", latitude: 7.37361, longitude: 3.90972, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North East", name_of_facility: "Oke'Badan Primary Healthcare Center", latitude: 7.37361, longitude: 3.90972, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North East", name_of_facility: "Ti Oluwani Hospital", latitude: 7.38056, longitude: 3.91528, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Elyon Specialist Hospital", latitude: 7.40389, longitude: 3.94194, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Ori-Eru Primary Health Center", latitude: 7.38169, longitude: 3.89149, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Naomi Medical Center", latitude: 7.38761, longitude: 3.88758, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Ayeye primary health center", latitude: 7.38226, longitude: 3.89533, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Oniyanrin Health Center", latitude: 7.38973, longitude: 3.89324, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Origbegi", latitude: 7.38257, longitude: 3.89293, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Oke-Adu Primary Health Center", latitude: 7.38083, longitude: 3.91528, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Bembow Medical Center", latitude: 7.381858, longitude: 3.915402, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North East", name_of_facility: "Tofunmi Medical Center", latitude: 7.40954, longitude: 3.929657, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Ibadan Central Hospital", latitude: 7.392136, longitude: 3.930991, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Iyanu Ayo Clinic and Maternity", latitude: 7.381837, longitude: 3.915402, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Manna Medical Center", latitude: 7.39194, longitude: 3.93083, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Molly Specialist Hospital", latitude: 7.409574, longitude: 3.929654, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Desire Specialist Hospital", latitude: 7.38826, longitude: 3.90935, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Sango Primary Health Center", latitude: 7.42729, longitude: 3.8933, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Oke-Are PHC", latitude: 7.37883, longitude: 3.89529, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Ibadan Polytechnic", latitude: 7.43323, longitude: 3.87996, type_of_facility: "Public", level_of_facility: "", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Basorun Primary Health Center", latitude: 7.41347, longitude: 3.93191, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Sabo Primary Health Center", latitude: 7.40252, longitude: 3.88509, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Agbowo Primary Health Center", latitude: 7.44732, longitude: 3.91219, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Oke-Itunnu Primary Health Center", latitude: 7.41827, longitude: 3.88452, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Mokola Health Center", latitude: 7.40489, longitude: 3.89373, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Ago Tapa PHC", latitude: 7.40258, longitude: 3.8924, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Hamdala Hospital", latitude: 7.44579, longitude: 3.91372, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Jubilee Hospital", latitude: 4.2901, longitude: 3.90197, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Redeemer's Health Center", latitude: 7.41726, longitude: 3.90244, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Mak Clinic and Maternity Home", latitude: 7.4137, longitude: 3.91382, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Total Family Hospital", latitude: 7.41557, longitude: 3.92996, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "King David Hospital", latitude: 7.44937, longitude: 3.91853, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Secretariat Staff Clinic, Agodi", latitude: 7.4118, longitude: 3.90798, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Highland Specialist Hospital", latitude: 7.39355, longitude: 3.90491, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Gold Cross Medical Clinic", latitude: 7.38824, longitude: 3.90398, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Mokola Hilltop Hospital", latitude: 7.40318, longitude: 3.89387, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Medical Practitioner Services Limited 1", latitude: 7.4006, longitude: 3.89209, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Badejoko Memorial Specialist Hospital", latitude: 7.41157, longitude: 3.89221, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Foremost Base Hospital", latitude: 7.41718, longitude: 3.8941, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North West", name_of_facility: "Police Hospital", latitude: 7.39929, longitude: 3.86928, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South East", name_of_facility: "Omiyale Health Post", latitude: 7.3723, longitude: 3.8984, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Montana Medical Center", latitude: 7.3459, longitude: 3.8787, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Royal Immaculate Hospital", latitude: 7.342, longitude: 3.8731, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Continental Medical Center", latitude: 7.3459, longitude: 3.8787, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Temilade Convalescent Maternity Home", latitude: 7.3747, longitude: 3.89745, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Oriaje Health Post", latitude: 7.3581, longitude: 3.90017, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Beloved Maternity and Child Welfare Clinic", latitude: 7.3458, longitude: 3.9157, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Orita Aperin Primary Health Center", latitude: 7.3635, longitude: 3.9197, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Newday Hospital", latitude: 7.3451, longitude: 3.9126, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Molas Clinic", latitude: 7.35319, longitude: 3.90299, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Glady's Hill Hospital", latitude: 7.335, longitude: 3.89189, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "T and K Health Center", latitude: 7.3511, longitude: 3.90034, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Algon PHC", latitude: 7.3462, longitude: 3.8929, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Abdullah Medical center", latitude: 7.3508, longitude: 3.9107, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Boluwaji Primary Health Center", latitude: 7.4362, longitude: 3.7343, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Elekuro Health Center", latitude: 7.3673, longitude: 3.914, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "ST. Mary Catholic Hospital", latitude: 7.35531, longitude: 3.911, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Kobomoje Health Center", latitude: 7.3675, longitude: 3.8947, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South East", name_of_facility: "Balaro Primary Health Center", latitude: 7.3546, longitude: 3.9056, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South East", name_of_facility: "Iyana Court Health Center", latitude: 7.3594, longitude: 3.90414, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Owode Health Center", latitude: 7.34843, longitude: 3.91307, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North West", name_of_facility: "Funminiyi Child and Welfare Clinic", latitude: 7.41333, longitude: 3.86299, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Lanark Specialist Hospital", latitude: 7.358, longitude: 3.8654, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Likeminds Fetal Hospital", latitude: 7.363, longitude: 3.8805, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Maternal and Child Health", latitude: 7.40285, longitude: 3.92524, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Aged and Widow Clinic", latitude: 7.37666, longitude: 3.86861, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Oluyole Primary Health Center", latitude: 7.3348, longitude: 3.8923, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Oke Ayo Primary Health Center", latitude: 7.374, longitude: 3.8515, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Adifare Primary Health Center", latitude: 7.3865, longitude: 3.8266, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Government College Primary Health Center", latitude: 7.40285, longitude: 3.92524, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Odo ona Primary Health Center", latitude: 7.3812, longitude: 3.8517, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Bode Primary Health Center", latitude: 7.3633, longitude: 3.8894, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Kososi Primary Health Center", latitude: 7.37, longitude: 3.8923, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Living Grace Hospital", latitude: 7.39327, longitude: 3.9343, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Odinjo Primary Health Center", latitude: 7.3563, longitude: 3.9144, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Raji Akande Primary Health Center", latitude: 7.3657, longitude: 3.90354, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Felele Primary Health Center", latitude: 7.34509, longitude: 3.88884, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Lanioka Health Center", latitude: 7.36975, longitude: 3.90216, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Royal Clinic", latitude: 7.41021, longitude: 3.89178, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North", name_of_facility: "Samonda Primary Health Center", latitude: 7.43211, longitude: 3.90456, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Anuoluwapo Hospital", latitude: 7.41798, longitude: 3.89051, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Best Care Hospital", latitude: 7.36507, longitude: 3.91414, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "Comfort Medical Center", latitude: 7.39823, longitude: 3.91097, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North", name_of_facility: "God's Grace", latitude: 7.39036, longitude: 3.90267, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Elewura Primary Health Center", latitude: 7.36651, longitude: 3.86095, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan North West", name_of_facility: "Koseunti Primary Health Center", latitude: 7.42242, longitude: 3.83948, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Central Bank of Nigeria Clinic", latitude: 7.39627, longitude: 3.8768, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Onireke Health Center", latitude: 7.39235, longitude: 3.87909, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Nigeria Railway Clinic", latitude: 7.38854, longitude: 3.87371, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Tony Hospital", latitude: 4.43186, longitude: 6.36322, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan South West", name_of_facility: "Jericho Specialist Hospital", latitude: 7.39338, longitude: 3.87303, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Kejide Hospital Lmited", latitude: 7.35421, longitude: 3.92028, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "The Vine Hospital and Maternity Care", latitude: 7.3645, longitude: 3.85039, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Zoe Specialist Mission Hospital", latitude: 7.36511, longitude: 3.84823, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Aleshinloye Primary Health Center", latitude: 7.38855, longitude: 3.87098, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Sharo Corner Primary Health Center", latitude: 7.37574, longitude: 3.87851, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Zenith Care Hospital", latitude: 7.36517, longitude: 3.84192, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Molete Primary Health Center", latitude: 7.3572, longitude: 3.8883, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan South West", name_of_facility: "Ibadan Anglican Diocese Hospital", latitude: 7.35639, longitude: 3.88633, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Omotayo Maternity Home", latitude: 7.37625, longitude: 3.8811, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan South West", name_of_facility: "Akere PHC", latitude: 7.37655, longitude: 3.89489, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan South West", name_of_facility: "Jolaleke Specialist Hospital", latitude: 7.36044, longitude: 3.86988, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan South West", name_of_facility: "Isale Osi PHC", latitude: 7.37388, longitude: 3.89109, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Akuro PHC", latitude: 7.37594, longitude: 3.88682, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Agbokojo PHC", latitude: 7.37948, longitude: 3.85583, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South West", name_of_facility: "Chief Shepard Hospital and Mission Hospital", latitude: 7.37753, longitude: 3.94704, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Oyo State College of Health Sciences Clinic", latitude: 7.40815, longitude: 3.8619, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Lilly Hospital", latitude: 7.41552, longitude: 3.8615, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Police Hospital", latitude: 7.40814, longitude: 3.86519, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North West", name_of_facility: "Best Western Victory Medical Center", latitude: 7.42068, longitude: 3.8722, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Sam Xeusos Denorah Specialist", latitude: 7.4175, longitude: 3.86259, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North West", name_of_facility: "Unity Medical Center", latitude: 7.41142, longitude: 3.86648, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North East", name_of_facility: "Lagelu Youth Friendly Center", latitude: 7.385272, longitude: 3.909037, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Inadequate" },
        { lga: "Ibadan North East", name_of_facility: "Alawaye Hospital and Nursing Home", latitude: 7.401939, longitude: 3.903326, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North East", name_of_facility: "Ibadan City Hospital", latitude: 7.401939, longitude: 3.903326, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Awoye Ajike Health Center and Maternity Home", latitude: 7.387313, longitude: 3.90764, type_of_facility: "Private", level_of_facility: "Primary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Kola Adekola Hospital", latitude: 7.38427, longitude: 3.90665, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan South East", name_of_facility: "Orita challenge primary health clinic", latitude: 7.339199, longitude: 3.87206, type_of_facility: "Public", level_of_facility: "Primary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North", name_of_facility: "Bethel Specialist Hospital", latitude: 7.41347, longitude: 3.89469, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" },
        { lga: "Ibadan North East", name_of_facility: "Broadcasting Corporation of Oyo State", latitude: 7.411968, longitude: 3.930618, type_of_facility: "Public", level_of_facility: "Secondary", level_of_ipc_preparedness: "Basic" },
        { lga: "Ibadan North East", name_of_facility: "Skyline Specialist Hospital", latitude: 7.401661, longitude: 3.939237, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Patnas Specialist Hospital", latitude: 7.410365, longitude: 3.927155, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Agugu Central Hospital", latitude: 7.382301, longitude: 3.922054, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "New Dawn Hospital and Maternity Center", latitude: 7.39174, longitude: 3.939586, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Intermediate" },
        { lga: "Ibadan North East", name_of_facility: "Oni-wumi Medical Center", latitude: 7.401679, longitude: 3.93924, type_of_facility: "Private", level_of_facility: "Secondary", level_of_ipc_preparedness: "Advanced" }
    ];

    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/akanimo1/clxpxza6u006p01r00zwoeix2',
        zoom: 11,
        pitch: 45,
        center: [3.9050612, 7.39043179]
    });
    

    map.on('load', () => {
        // Add facilities data as a source
        map.addSource('facilities', {
            type: 'geojson',
            data: {
                type: 'FeatureCollection',
                features: allFacilities.map(facility => ({
                    type: 'Feature',
                    properties: {
                        name: facility.name_of_facility,
                        type: facility.type_of_facility,
                        category: facility.level_of_facility,
                        ipc: facility.level_of_ipc_preparedness,
                        lga: facility.lga
                    },
                    geometry: {
                        type: 'Point',
                        coordinates: [facility.longitude, facility.latitude]
                    }
                }))
            }
        });
       
        // Define IPC levels and their corresponding colors
        const ipcLevels = ['Advanced', 'Intermediate', 'Basic', 'Inadequate'];
        const colors = ['#00FF00', '#FFFF00', '#0000FF', '#FF0000'];

        // Create legend
        const legend = document.getElementById('legend');

        ipcLevels.forEach((level, i) => {
          const color = colors[i];
          const item = document.createElement('div');
          const key = document.createElement('span');
          key.className = 'legend-key';
          key.style.backgroundColor = color;

          const value = document.createElement('span');
          value.innerHTML = `${level}`;
          item.appendChild(key);
          item.appendChild(value);
          legend.appendChild(item);
        });

        // Change info window on hover
        map.on('mousemove', (event) => {
          const areas = map.allFacilities(event.point, {
            layers: ['ipclevel']
          });
          document.getElementById('pd').innerHTML = areas.length
            ? `<h3>${areas[0].properties.name}</h3><p><strong><em>${areas[0].properties.level}</strong></em></p>`
            : `<p>Hover over an area!</p>`;
        });
      });
        // Add circle layer with different colors based on IPC readiness
        map.addLayer({
            id: 'facilities-layer',
            type: 'circle',
            source: 'facilities',
            paint: {
                'circle-radius': 5,
                'circle-color': [
                    'match',
                    ['get', 'ipc'],
                    'Advanced', 'green',
                    'Intermediate', 'yellow',
                    'Basic', 'pink',
                    'Inadequate', 'red',
                    /* other */ '#ccc'
                ],
                'circle-stroke-width': 2,
                'circle-stroke-color': 'white',
            }
        });

        // Add popups
        map.on('click', 'facilities-layer', (e) => {
            const coordinates = e.features[0].geometry.coordinates.slice();
            const properties = e.features[0].properties;

            new mapboxgl.Popup()
                .setLngLat(coordinates)
                .setHTML(`
                    <h3>${properties.name}</h3>
                    <p>Type: ${properties.type}</p>
                    <p>Category: ${properties.category}</p>
                    <p>IPC Preparedness: ${properties.ipc}</p>
                    <p>LGA: ${properties.lga}</p>
                `)
                .addTo(map);
        });

        // Change the cursor to a pointer when the mouse is over the facilities layer
        map.on('mouseenter', 'facilities-layer', () => {
            map.getCanvas().style.cursor = 'pointer';
        });

        // Change it back to a pointer when it leaves.
        map.on('mouseleave', 'facilities-layer', () => {
            map.getCanvas().style.cursor = '';
        });
</script>

</body>
</html>
